
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru-ru" lang="ru-ru" >
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="keywords" content="golos, блог, блокчейн, блоггеры, социальная сеть, апвот, поощрение, лайки, контент, децентрализация" />
		<meta name="rights" content="(с) Joopiter.ru и denis-skripnik.name" />
		<meta name="description" content="Live blogs space - web-клиент для блокчейна golos, платформы для блоггеров. Его главным преимуществом является то, что он локальный, а также имеет свою экономику распределения вознаграждений (СМ. about.html)" />
		
		<title>Live blogs space</title>
		
		<link href="favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
		<link href="css/view.css" rel="stylesheet" type="text/css" />
		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="css/bootstrap/bootstrap.min.css">
		<link href="css/bootstrap-theme.min.css" rel="stylesheet" type="text/css" />
		<link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		<link href="css/bootstrap/bootstrap-social.css" rel="stylesheet" type="text/css" />
		<link href="css/bootstrap/fileinput.css" rel="stylesheet" type="text/css" />
		<link href="css/font-exo-cyrillic.css" rel="stylesheet" type="text/css" />
		<link href="css/1vtemplate.css" rel="stylesheet" type="text/css" />
		
		<script src="js/lib/jquery.min.js"></script>
		<script src="js/lib/jquery-ui.min.js"></script>		
		<script src="js/lib/sjcl.min.js" type="text/javascript"></script>
		<script src="js/lib/bootstrap.min.js"></script>
		<script src="js/lib/fileinput.min.js" type="text/javascript"></script>
		<script src="js/1vtemplate.js" type="text/javascript"></script>

		<script src="https://unpkg.com/golos-js@latest/dist/golos.min.js" type="text/javascript"></script>
		<script src="js/marked.js" type="text/javascript"></script>
		<script src="js/moment.js" type="text/javascript"></script>
		<script src="js/goloshelper.js" type="text/javascript"></script>
		
		<script src="js/xss.min.js" type="text/javascript"></script>
		<script src="js/view.js" type="text/javascript"></script>
	</head>
	<body class="body">
<header id="header_wrapper" class="mp_header_wrapper">
			<nav id="header" class="navbar navbar-default radiusless">
				<div class="main_wrapper">
					<div class="navbar-header">
						<button type="button" id="main-menu_btn" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu" aria-expanded="false">
							<span class="sr-only">Главное меню</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse" id="main-menu">
					</div>
				</div>
			</nav>
        </header>
		<div id="principal_wrapper">
			<div class="main_wrapper">
				<aside id="sidebar_left">
					<div id="main_logo_wrapper">
						<a href="index.html" id="logo_link"><img src="images/logo.png" class="img-responsive" alt="Live blogs space" title="Live blogs space"/></a>
					</div>
					<div id="login_div" class="row" style="margin-top: 5px; margin-bottom: 10px;">
						<form action="index.html" method="post" name="adminForm" id="adminForm" class="form-validate col-sm-10 col-sm-offset-1">
								<div class="form-group1">
									<label for="login" style="color: white;">Логин golos<span style="color: red;">*</span> </label>
									<div class="input-group">
										<div class="input-group-addon">@</div>
										<input type="text" class="form-control required" id="login" name="login" onblur="checkLogin(this.value);" required="required"> 
									</div>
								</div>
								<div class="form-group1">
									<label for="key" style="color: white;">Постинг ключ</label> <span style="color: red;">*</span> 
									<input type="password" class="form-control required" id="key" name="key" placeholder="Начинается с 5" required="required">
								</div>
								<br>
								<div class="center" style="text-align: center;">
									<input type="hidden" name="ok" id="ok" value="false">
									<input type="button" class="btn btn-primary" value="Войти" onclick="if(!storeKeyLocally()){return false;};this.form.submit();"> или <a href="reg.html">Зарегистрироваться по инвайт-коду</a>
								</div>
						</form>
					</div>

					<div id="avatar">
						<div id="hello"></div>
						<div id="battery"></div>
					</div>
				</aside>
				<div id="main_content_wrapper">
					<section id="main_content">
						
						<div id="main_column_wrapper">
							<div id="main_column">																	
								<ol itemscope itemtype="https://schema.org/BreadcrumbList" class="breadcrumb">
									<li>
										Вы здесь: &#160;
									</li>	
									<li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem" class="active">
										<span itemprop="name">
											Пользователь <span id="username"></span>				
										</span>
										<meta itemprop="position" content="1">
									</li>
								</ol>
																																																							<div id="j_component">
									<div style="margin: auto; text-align: -webkit-center;">
									<img style="margin: auto;" id="loader" src="images/11.gif">
									</div>

									<div class="row">
										<div class="col-lg-5" id="x5">
											<nav class="">
												<div class="collapse navbar-collapse" id="items_collapsable_wrapper">
													<div id="items_list_wrapper" class="row">
													</div>
													<button id="discussions-by-blog-button" onclick="getDiscussionsByBlog(author)">Ещё</button>
												</div>
											</nav>
										</div>
										<div class="col-lg-7" id="x7">
											<div id="item_content_wrapper">
												<div style="margin: auto; text-align: -webkit-center;">
													<img style="display: none;" id="content_loader" src="images/11.gif">
												</div>
												
<div id="ava"></div>
												<h1 id="account_name"></h1>
<h2>Баланс: <span id="account_balance"></span> и <span id="account_vesting_shares"></span></h2>
<div id="account_about"></div>
<p align="center"><a id="transfer_to_this_user" target="_blank">Перевести golos пользователю</a></p>
<ul>
<li>Делегировано другим аккаунтам: <span id="account_delegated_vesting_shares"></span>;
<div id="modal_delegated_vesting_shares" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Список аккаунтов, которым делегирована shares</h4>
      </div>
      <div class="modal-body">
<table><thead><tr><th>Логин</th><th>Сумма</th></tr></thead><tbody id="body_delegated_vesting_shares"></tbody></table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
      </div>
    </div>
  </div>
</div></li>
<li>Получено от других аккаунтов: <span id="account_received_vesting_shares"></span>
<div id="modal_received_vesting_shares" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Список аккаунтов, которые делегировали SHARES этому пользователю</h4>
      </div>
      <div class="modal-body">
<table><thead><tr><th>Логин</th><th>Сумма</th></tr></thead><tbody id="body_received_vesting_shares"></tbody></table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
      </div>
    </div>
  </div>
</div></li>
<li>Общий баланс SHARES (С учётом делегированного другим аккаунтам и полученного): <span id="account_full_vesting"></span>;</li>
<li>Вывод из Shares в golos: <span id="account_full_vesting_withdraw"></span>;<span id="active_vesting_withdraw"></span></li>
<li>Количество опубликованных постов: <span id="account_post_count"></span>, а комментариев: <span id="account_content_count"></span>;</li>
<li>Улыбнулся <span id="account_vote_count"></span>.</li>
<li>Подписчиков: <span id="followers"></span>, подписок: <span id="following"></span>
<div id="followers-link" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Список из 100 подписчиков</h4>
      </div>
      <div class="modal-body">
<span id="followers_body"></span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
      </div>
    </div>
  </div>
</div>

<div id="following-link" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title">Список подписок (100 элементов)</h4>
      </div>
      <div class="modal-body">
<span id="following_body"></span>
      </div>
      <!-- Футер модального окна -->
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Закрыть</button>
      </div>
    </div>
  </div>
</div>
</li>
</ul>

<a class="tt" onclick="spoiler('more_info'); return false">Подробная информация о пользователе</a>
<div id="more_info" class="terms" style="display: none;">
<ul id="more_info_list">
</ul>
</div>
												
												<div id="query_header">
												</div>
												
												<div id="qq">
												</div>

												<form action="" id="vote_form" style="display: none;">
													<div style="float:left;">
														<input type="range" name="power" min="1" max="50" step="1" value="50" style="width: 240px; margin-top: 10px; margin-right: 10px;" onchange="document.getElementById('vpower').innerHTML = this.value"> 
													</div>			
													<div style="float:left;">
														<button type="button" onClick="votePost(document.getElementById('vpower').innerHTML, this.form.permlink.value, this.form.author.value); return false;">Подарить <span id="vpower">100</span> улыбок</button>
													</div>
													<input type="hidden" name="permlink" value="">
													<input type="hidden" name="author" value="">
													<div style="float:center;">
														<input type="button" value="Прокачать пост" onclick="boostingPost(this.form.permlink.value, this.form.author.value); return false;">
													</div>
													<div style="float:right;">
														<button type="button" onClick="maximumVote(this.form.permlink.value, this.form.author.value); return false;"><strong>подарить 50 улыбок</strong></button>
													</div>			
												</form>
												<br>
												
												<div id="my_vote">
												</div>																								
														
												<div id="voters">
												</div>
												<br>
												<br>
												<div style="margin: auto; text-align: -webkit-center; display: none;">
														Ожидаем загрузки комментариев...
														<img id="answers_loader" src="images/11.gif">
													</div>
												<div id="answers_list">			
												</div>		
												<div id="answer" style="display: none;">
													<div class="well">
														<div class="form-group">
															<label for="editor">Комментарий</label>
															<textarea id="editor" style="width: 100%;" rows="5"></textarea>						
														</div>
														<div class="form-group text-center">
															<button type="button" class="btn btn-info" onclick="sendMainComment(document.getElementById('editor').value, this);">Отправить</button>
														</div>
													</div>
												</div>		
											</div>
										</div>
									</div>
								</div>																																
							</div>
						</div>
					</section>
				</div>

				<div id="footer_buffer"></div>
					<footer id="footer_wrapper">
						<div id="footer" class="padding_tb20 row">
							<div class="col-sm-12">
								<div class="footer2">LiveBlogs.Space - <a href="show.html?author=liveblogs&permlink=o-proekte-liveblogsspace-opisanie-czelevaya-auditoriya-obosnovanie-yekonomiki-prilozheniya-1538924510">О проекте</a></div>
							</div>
						</div>
					</footer>
				<div class="clearfix"></div>
			</div>
		</div>
		<div class="clearfix"></div>
		<script>
			Init();
			mainMenu();

										var author = getUrlVars()['author'];
										$('title').html('Пользователь ' + author + ' | Live blogs space');
										getDiscussionsByBlog(author);
										jQuery('#username').html(author);
										golos.api.getAccounts([author], function(err, result) {
//  console.log(err, result);
if (result.length === 0) {
console.log('ok');
jQuery('#item_content_wrapper').html('<h1>Пользователь не найден!</h1>\
<p align="center"><strong>Пожалуйста, проверьте его написание или, если вы перешли по ссылке с логином, обратитесь к тому, кто её разместил, чтобы он исправил и сообщил вам правильную.</strong></p>');
}

  if (!err) {
  result.forEach(function(item) {
	let json_metadata=item.json_metadata;
				let metadata;
				if(''==json_metadata){
					metadata={};
				}
				else{
					metadata=JSON.parse(json_metadata);
				}

				if(typeof metadata.profile == 'undefined'){
					metadata.profile={};
				}
if (metadata.profile.about){
$('#account_about').html(metadata.profile.about);
}
if(typeof metadata.profile.interests !== 'undefined'){
if (metadata.profile.interests) {
	var interests = metadata.profile.interests;
var interest_element = '';
var interests_list = '';
interests.forEach(function(interest) {
interest_element += '<a href="tag.html?tag=' + interest + '" target="_blank">' + interest + '</a>, ';
interests_list += interest + ',';
});
interest_element = interest_element.replace(/,\s*$/, "");
interests_list = interests_list.replace(/,\s*$/, "");
$('#more_info_list').append('<li>Интересы (<a href="tag.html?tag=' + interests_list + '" target="_blank">Показать ленту постов со всеми интересами пользователя</a>):<br/>' + interest_element + '</li>');
}
	}
				if(typeof metadata.profile.location !== 'undefined'){
if (metadata.profile.location) {
					$('#more_info_list').append('<li>Местоположение: ' + metadata.profile.location + '</li>');
}
				}
				if(typeof metadata.profile.website !== 'undefined'){
if (metadata.profile.website) {
					$('#more_info_list').append('<li>Сайт: <a href="' + metadata.profile.website + '" target="_blank">' + metadata.profile.website + '</a></li>');
}
				}
				if(typeof metadata.profile.telegram !== 'undefined'){
if (metadata.profile.telegram) {
					$('#more_info_list').append('<li>Telegram: <a href="https://t.me/' + metadata.profile.telegram + '" target="_blank">' + metadata.profile.telegram + '</a></li>');
}
				}
				if(typeof metadata.profile.discord !== 'undefined'){
if (metadata.profile.discord) {
					$('#more_info_list').append('<li>Discord: ' + metadata.profile.discord + '</li>');
}
				}
				if(typeof metadata.profile.instagram !== 'undefined'){
if (metadata.profile.instagram) {
					$('#more_info_list').append('<li>Instagram: <a href="https://www.instagram.com/' + metadata.profile.instagram + '" target="_blank">' + metadata.profile.instagram + '</a></li>');
}
				}
				if(typeof metadata.profile.vkontakte !== 'undefined'){
if (metadata.profile.vkontakte) {
					$('#more_info_list').append('<li>Вконтакте: <a href="https://vk.com/' + metadata.profile.vkontakte + '" target="_blank">' + metadata.profile.vkontakte + '</a></li>');
}
				}
				if(typeof metadata.profile.facebook !== 'undefined'){
if (metadata.profile.facebook) {
					$('#more_info_list').append('<li>Facebook: <a href="https://facebook.com/' + metadata.profile.facebook + '" target="_blank">' + metadata.profile.facebook + '</a></li>');
}
				}
				if(typeof metadata.profile.twitter !== 'undefined'){
if (metadata.profile.twitter) {
					$('#more_info_list').append('<li>Твиттер: <a href="https://twitter.com/' + metadata.profile.twitter + '" target="_blank">' + metadata.profile.twitter + '</a></li>');
}
				}
				if(typeof metadata.profile.skype !== 'undefined'){
if (metadata.profile.skype) {
					$('#more_info_list').append('<li>Скайп: <a href="skype:' + metadata.profile.skype + '" target="_blank">' + metadata.profile.skype + '</a></li>');
}
				}
				if(typeof metadata.profile.gender !== 'undefined'){
if (metadata.profile.gender) {
if (metadata.profile.gender === 'male') {
					var gender = 'мужской';
} else if (metadata.profile.gender === 'female') {
	var gender = 'женский';
} else {
	var gender = 'не указан';
}
$('#more_info_list').append('<li>Пол: ' + gender + '</li>');
}
				}
				var follow = '';
		if(isLoggedIn() && user.login != author && document.getElementById('vote_form'))
		{
			follow = '<span class="tt" onclick="spoiler(\'follow\'); return false">Действия...</span>';
			follow += '<span id="follow" class="terms" style="display: none;">';
			if(user.followers.includes(author))
			{
				follow += "<div style='float: left; margin-top: -7px; margin-right: 5px;'> <img src='images/hs.png' title='Подписан на вас'> </div>";
			}
			if(user.following.includes(author))
			{
				follow += "<button class='btn btn-warning' onClick='follow(\""+author+"\", \"\"); style.display=\"none\"'>Отписаться</button> ";
			}
			else
			{
			follow += "<button class='btn btn-success' onClick='follow(\""+author+"\", \"blog\"); style.display=\"none\"'>Подписаться</button> ";
			}			
			follow += "<button class='btn btn-danger' onClick='ignore(\""+author+"\"); style.display=\"none\"'>Игнорировать</button> ";
			follow += '</span>';
		}
if (metadata.profile.name) {
		jQuery("#account_name").html(metadata.profile.name+follow);
} else {
	jQuery("#account_name").html(author+follow);
}
		jQuery("#account_content_count").html(item.subcontent_count);
jQuery("#account_vote_count").html(item.vote_count + wordForm(item.vote_count, [' посту', ' постам', ' постам']));
jQuery("#account_post_count").html(item.content_count);
jQuery("#account_balance").html(item.balance);
jQuery("#account_vesting_shares").html(item.vesting_shares);
jQuery("#account_delegated_vesting_shares").html('<a href="#modal_delegated_vesting_shares" class="btn btn-primary" data-toggle="modal">' + item.delegated_vesting_shares + '</a>');
jQuery("#account_received_vesting_shares").html('<a href="#modal_received_vesting_shares" class="btn btn-primary" data-toggle="modal">' + item.received_vesting_shares + '</a>');
var full_vesting = parseFloat(item.vesting_shares) - parseFloat(item.delegated_vesting_shares) + parseFloat(item.received_vesting_shares);
jQuery("#account_full_vesting").html(full_vesting);

var vesting_withdraw_rate = parseFloat(item.vesting_withdraw_rate);
var full_vesting_withdraw = vesting_withdraw_rate*28 + ' SHARES';
if (full_vesting_withdraw !== '0 SHARES') {
jQuery("#active_vesting_withdraw").html(' Выводится по <span id="account_vesting_withdraw_rate"></span> 28 дней;');
}
jQuery("#account_full_vesting_withdraw").html(full_vesting_withdraw);
jQuery("#account_vesting_withdraw_rate").html(item.vesting_withdraw_rate);

				var ava = document.getElementById("ava");
						if(metadata.profile.profile_image != undefined)
						{
							ava.style.backgroundImage = "url('https://imgp.golos.io/256x256/"+metadata.profile.profile_image+"')";
							
						}else{
							ava.style.backgroundImage = "url('images/ninja.png')";
						}
				ava.classList.add('ava_div');
			

    });
  }
  else {
jQuery('#item_content_wrapper').html('<p align="center"><strong>Ошибка. Возможно, проблемы на стороне блокчейна.</strong></p>')
 }
 });

var type = 'delegated';
golos.api.getVestingDelegations(author, '', 1000, type, function(err, res) {
  //console.log(err, res);
  if ( ! err) {
var vesting_shares_amount = '';
  var body_delegated_vesting_shares = '';
  res.forEach(function(item) {
      console.log('getVestingDelegations', item);
vesting_shares_amount = item.vesting_shares;
	  body_delegated_vesting_shares = '<tr><td><a href="user.html?author=' + item.delegatee + '" target="_blank">@' + item.delegatee + '</a></td><td>' + vesting_shares_amount + '</td></tr>';
		jQuery("#body_delegated_vesting_shares").append(body_delegated_vesting_shares);
	});
 }
  else console.error(err);
});

var type = 'received';
golos.api.getVestingDelegations(author, '', 1000, type, function(err, res) {
  //console.log(err, res);
  if ( ! err) {
var vs_amount = '';
  var body_received_vesting_shares = '';
  res.forEach(function(item) {
      console.log('getVestingDelegations', item);
vs_amount = item.vesting_shares;
	  body_received_vesting_shares = '<tr><td><a href="user.html?author=' + item.delegator + '" target="_blank">@' + item.delegator + '</a></td><td>' + vs_amount + '</td></tr>';
		jQuery("#body_received_vesting_shares").append(body_received_vesting_shares);
	});
 }
  else console.error(err);
});

golos.api.getFollowCount(author, function(err, result) {
  if (!err) {
  jQuery("#followers").html('<a href="#followers-link" class="btn btn-primary" data-toggle="modal">' + result.follower_count + '</a>');
jQuery("#following").html('<a href="#following-link" class="btn btn-primary" data-toggle="modal">' + result.following_count + '</a>');
	}
  else console.error(err);
});

golos.api.getFollowing(author, '', 'blog', 100, function(err, result) {
  //console.log(err, result);
  if ( ! err) {
result.sort(function(a, b) {
  if(a.following < b.following) return -1;
  if(a.following > b.following) return 1;
  return 0;
})
  var following_element = '';
  result.forEach(function(item) {
      console.log('getFollowing', item);
following_element += '<a href="user.html?author=' + item.following + '" target="_blank">@' + item.following + '</a>, ';
    });
		following_element = following_element.replace(/,\s*$/, "");
jQuery("#following_body").html(following_element);
	}
  else console.error(err);
});

golos.api.getFollowers(author, '', 'blog', 100, function(err, result) {
  //console.log(err, result);
  if ( ! err) {
result.sort(function(a, b) {
  if(a.follower < b.follower) return -1;
  if(a.follower > b.follower) return 1;
  return 0;
})
  var follower_element = '';
  result.forEach(function(item) {
      console.log('getFollowers', item);
follower_element += '<a href="user.html?author=' + item.follower + '" target="_blank">@' + item.follower + '</a>, ';
    });
		follower_element = follower_element.replace(/,\s*$/, "");
jQuery("#followers_body").html(follower_element);
	}
  else console.error(err);
});

			if (user.login !== author) {
var transfer_url = 'wallet.html?to=' + author;
 $('#transfer_to_this_user').attr('href',transfer_url);
  } else {
$('#transfer_to_this_user').css('display', 'none');
 }
			</script>
	</body>
</html>
